{% extends 'list.html' %}
{% load static %}
{% load widget_tweaks %}
{% block head_list %}
    <link href="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>

    <link href="{% static 'lib/select2-4.0.13/css/select2.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'lib/select2-4.0.13/css/select2-bootstrap4.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/select2-4.0.13/js/select2.min.js' %}"></script>
    <script src="{% static 'lib/select2-4.0.13/js/i18n/es.js' %}"></script>

    <script src="{% static 'lib/moment-2.25.3/moment-with-locales.js' %}"></script>
    <script src="{% static 'lib/tempusdominus-bootstrap-4/tempusdominus-bootstrap-4.min.js' %}"></script>
    <link href="{% static 'lib/tempusdominus-bootstrap-4/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet"/>

    <link href="{% static 'lib/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.js' %}"></script>

    <script src="{% static 'rent/js/form.js' %}"></script>
{% endblock %}

{% block content %}
    <form action="{% url 'change_password' %}" method="post">
        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-edit"></i>
                    Cambio de Contraseña
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <input type="hidden" name="next" value="{{ next }}">
                    {% csrf_token %}
                    <div class="input-group mb-3">
                        <input class="form-control" id="username" type="email" placeholder="Correo electronico"
                               name="username" required value="{{ request.user.email }}" disabled/>
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-envelope"></span>
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <input class="form-control" type="password" placeholder="Contraseña Actual"
                               name="old_password" id="old_password" required/>
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-lock"></span>
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <input class="form-control" type="password" placeholder="Nueva Contraseña"
                               name="new_password" id="new_password" required/>
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-lock"></span>
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <input class="form-control" type="password" placeholder="Confirmación Contraseña"
                               name="confirm_new_password" id="confirm_new_password" required/>
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-lock"></span>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-primary btn-flat">
                    <i class="fas fa-save"></i> Cambiar Contraseña
                </button>
            </div>
        </div>


{#        <input type="hidden" name="next" value="{{ next }}">#}
{#        {% csrf_token %}#}
{#        <div class="input-group mb-3">#}
{#            <input class="form-control" id="username" type="email" placeholder="Correo electronico"#}
{#                   name="username" required/>#}
{#            <div class="input-group-append">#}
{#                <div class="input-group-text">#}
{#                    <span class="fas fa-envelope"></span>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="input-group mb-3">#}
{#            <input class="form-control" type="password" placeholder="Contraseña Actual"#}
{#                   name="old_password" id="old_password" required/>#}
{#            <div class="input-group-append">#}
{#                <div class="input-group-text">#}
{#                    <span class="fas fa-lock"></span>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="input-group mb-3">#}
{#            <input class="form-control" type="password" placeholder="Nueva Contraseña"#}
{#                   name="new_password" id="new_password" required/>#}
{#            <div class="input-group-append">#}
{#                <div class="input-group-text">#}
{#                    <span class="fas fa-lock"></span>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="input-group mb-3">#}
{#            <input class="form-control" type="password" placeholder="Confirmación Contraseña"#}
{#                   name="confirm_new_password" id="confirm_new_password" required/>#}
{#            <div class="input-group-append">#}
{#                <div class="input-group-text">#}
{#                    <span class="fas fa-lock"></span>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <hr>#}
{#        <div class="row">#}
{#            <div class="col-lg-12">#}
{#                <button type="submit" class="btn btn-primary btn-block">#}
{#                    <i class="fas fa-sign-in-alt"></i> Cambiar Contraseña#}
{#                </button>#}
{#            </div>#}
{#        </div>#}
    </form>

    <script type="application/javascript">
        {% if flagChangeFail %}
            let errors = "{{error_message}}";
            Swal.fire({
                title: 'Error!',
                text: errors,
                icon: 'error'
            });
        {% endif %}
        {% if flagChangeSuccess %}
            let success = "{{success_message}}";
            Swal.fire({
                title: 'Éxito!',
                text: success,
                icon: 'success'
            });
        {% endif %}
    </script>
{% endblock %}